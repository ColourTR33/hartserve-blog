# nginx.conf  (repo root)
server {
  listen 80 default_server;
  server_name _;

  # Hugo artifacts are copied to /usr/share/nginx/html by the Dockerfile
  root /usr/share/nginx/html;

  # Optional: if someone hits the bare root, send them to /blog/
  location = / {
    return 302 /blog/;
  }

  # Serve the Hugo site under /blog/
  location /blog/ {
    # try the file or dir, else SPA-style fallback to /blog/index.html
    try_files $uri $uri/ /blog/index.html;
  }

  # Static assets (PaperMod puts CSS/JS here)
  location /blog/assets/ {
    expires 7d;
    add_header Cache-Control "public, max-age=604800";
    try_files $uri =404;
  }

  # Security-ish headers
  add_header X-Content-Type-Options nosniff;
  add_header X-Frame-Options SAMEORIGIN;
  add_header Referrer-Policy strict-origin-when-cross-origin;

  # Nice-to-have: donâ€™t log asset hits
  location ~* \.(?:css|js|map|gif|jpe?g|png|svg|ico|webp|woff2?)$ {
    access_log off;
  }
}